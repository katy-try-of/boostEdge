<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Carrito ‚Äì BoostEdge</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-[#F4F6F8] text-slate-900">

  <!-- NAVBAR -->
  <header class="bg-white shadow-sm mb-10">
    <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 flex items-center justify-between h-16">

      <!-- LOGO -->
      <a href="index.html" class="flex items-center gap-2">
        <img src="imagenes/logo.png" alt="BoostEdge Logo" class="h-16 w-auto">
      </a>

      <!-- MENU -->
      <nav class="hidden md:flex gap-8 text-sm font-medium text-slate-600">
        <a href="index.html#one" class="hover:text-[#1FB6FF]">Productos</a>
        <a href="index.html#por-que" class="hover:text-[#1FB6FF]">Por qu√© BoostEdge</a>
        <a href="index.html#faq" class="hover:text-[#1FB6FF]">Preguntas frecuentes</a>
        <a href="index.html#resenas" class="hover:text-[#1FB6FF]">Rese√±as</a>
        <a href="blog.html" class="hover:text-[#1FB6FF]">Blog</a>
      </nav>

      <!-- ICONO CARRITO -->
      <a href="carrito.html" class="relative">
        <img src="imagenes/carrito.png" class="w-11 h-11">
        <span id="cart-count" class="absolute -top-2 -right-2 bg-[#1FB6FF] text-white text-xs rounded-full px-2 py-0.5">
          0
        </span>
      </a>

    </div>
  </header>



  <main class="max-w-4xl mx-auto p-6">

    <h1 class="text-3xl font-bold text-[#0F2D47] mb-6">Tu carrito</h1>

    <!-- CONTENEDOR DEL CARRITO -->
    <div id="cart-items" class="space-y-4"></div>

    <!-- RESUMEN -->
    <div id="cart-summary" class="mt-10 bg-white p-6 rounded-2xl shadow hidden">
      <h2 class="text-xl font-semibold mb-4">Resumen</h2>

      <div class="flex justify-between text-sm mb-2">
        <span>Subtotal</span>
        <span id="subtotal">0 ‚Ç¨</span>
      </div>

      <div class="flex justify-between text-sm mb-2">
        <span>IVA (21%)</span>
        <span id="iva">0 ‚Ç¨</span>
      </div>

      <div class="border-t my-3"></div>

      <div class="flex justify-between text-lg font-bold">
        <span>Total</span>
        <span id="total">0 ‚Ç¨</span>
      </div>

      <button onclick="comprar()"
        class="w-full mt-6 py-3 bg-[#1FB6FF] text-white rounded-full font-semibold hover:bg-[#0A73B8] transition">
        Comprar ahora
      </button>
    </div>

  </main>



  <script>
    
    /* === Normalizar datos del carrito === */
    function fixCartData() {
      let cart = JSON.parse(localStorage.getItem("cart")) || [];
    
      cart = cart.map(item => ({
        ...item,
        quantity: (typeof item.quantity === "number" && item.quantity > 0)
          ? item.quantity
          : 1
      }));
  
      localStorage.setItem("cart", JSON.stringify(cart));
    }
    
    
    
    /* === Descuentos por producto (Black Friday) === */
    function getProductDiscount(name) {
    
      const offer = localStorage.getItem("active_offer");
    
      if (offer !== "black_friday_10") return 0;  
    
      // aqu√≠ definimos descuentos independientes
      if (name === "BoostEdge One") return 20;
      if (name === "BoostEdge Pro") return 10;
    
      return 0;
    }
    
    
    
    /* === Cargar carrito === */
    function loadCart() {
    
      fixCartData();
      let cart = JSON.parse(localStorage.getItem("cart")) || [];
    
      const list = document.getElementById("cart-items");
      const summary = document.getElementById("cart-summary");
      const badge = document.getElementById("cart-count");
    
      list.innerHTML = "";
    
      if (cart.length === 0) {
        list.innerHTML = `<p class="text-slate-600 text-center text-lg">Tu carrito est√° vac√≠o.</p>`;
        summary.classList.add("hidden");
        badge.textContent = 0;
        return;
      }
  
      badge.textContent = cart.reduce((acc, item) => acc + item.quantity, 0);
  
      cart.forEach((item, index) => {
        const discount = getProductDiscount(item.name);
        const priceOriginal = item.price * item.quantity;
        const priceFinal = priceOriginal * (1 - discount / 100);
    
        const row = document.createElement("div");
        row.className = "bg-white p-4 rounded-2xl shadow flex justify-between items-center";
    
        row.innerHTML = `
          <div>
            <p class="font-semibold text-[#0F2D47]">${item.name}</p>
        
            ${
              discount > 0
                ? `
                    <p class="text-xs text-slate-400 line-through">${priceOriginal.toFixed(2)} ‚Ç¨</p>
                    <p class="text-sm font-semibold text-[#1FB6FF]">
                      ${priceFinal.toFixed(2)} ‚Ç¨ <span class="text-xs text-red-500 ml-1">(-${discount}%)</span>
                    </p>
                  `
                : `
                    <p class="text-sm text-slate-600">${priceOriginal.toFixed(2)} ‚Ç¨</p>
                  `
            }
          </div>
      
          <div class="flex items-center gap-3">
            <button class="px-3 py-1 bg-slate-200 rounded-full" onclick="changeQty(${index}, -1)">‚àí</button>
            <span class="font-semibold">${item.quantity}</span>
            <button class="px-3 py-1 bg-slate-200 rounded-full" onclick="changeQty(${index}, 1)">+</button>
        
            <button class="ml-4 text-red-500 font-bold" onclick="removeItem(${index})">üóëÔ∏è</button>
          </div>
        `;
      
        list.appendChild(row);
      });
  
      summary.classList.remove("hidden");
      updateTotals();
    }
    
    
    
    /* === Cambiar cantidad === */
    function changeQty(index, amount) {
      let cart = JSON.parse(localStorage.getItem("cart")) || [];
    
      cart[index].quantity = Math.max(1, cart[index].quantity + amount);
    
      localStorage.setItem("cart", JSON.stringify(cart));
      loadCart();
    }
    
    
    
    /* === Eliminar producto === */
    function removeItem(index) {
      let cart = JSON.parse(localStorage.getItem("cart")) || [];
      cart.splice(index, 1);
    
      localStorage.setItem("cart", JSON.stringify(cart));
      loadCart();
    }
    
    
    
    /* === Actualizar totales === */
    function updateTotals() {
    
      let cart = JSON.parse(localStorage.getItem("cart")) || [];
    
      let subtotal = 0;
    
      cart.forEach(item => {
        const discount = getProductDiscount(item.name);
        const priceOriginal = item.price * item.quantity;
        const priceFinal = priceOriginal * (1 - discount / 100);
        subtotal += priceFinal;
      });
  
      const iva = subtotal * 0.21;
      const total = subtotal + iva;
  
      document.getElementById("subtotal").textContent = subtotal.toFixed(2) + " ‚Ç¨";
      document.getElementById("iva").textContent = iva.toFixed(2) + " ‚Ç¨";
      document.getElementById("total").textContent = total.toFixed(2) + " ‚Ç¨";
    }
    
    
    
    /* === Comprar === */
    function comprar() {
      alert("El proceso de compra estar√° disponible pr√≥ximamente.");
    }
    
    
    
    /* === Inicio === */
    loadCart();
    
    </script>
    

</body>
</html>
